<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="generator" content="ExDoc v0.18.1">
    <title>Setup – ex_spirit_tutorial v0.1.0</title>
    <link rel="stylesheet" href="dist/app-c922dbe7ef.css" />
    
    <script src="dist/sidebar_items-3a2c0b4952.js"></script>
    
    <link rel="stylesheet" href="dist/ex_doc_makeup-css.css"/>
    
    
  </head>
  <body data-type="extras">
    <script>try { if(localStorage.getItem('night-mode')) document.body.className += ' night-mode'; } catch (e) { }</script>

<div class="main">
<button class="sidebar-toggle">
  <span class="icon-menu" aria-hidden="true"></span>
  <span class="sr-only">Toggle Sidebar</span>
</button>
<section class="sidebar">

  
  <a href="api-reference.html" class="sidebar-projectLink">
    <div class="sidebar-projectDetails">
      <h1 class="sidebar-projectName">
        ex_spirit_tutorial
      </h1>
      <h2 class="sidebar-projectVersion">
        v0.1.0
      </h2>
    </div>
    
  </a>

  <form class="sidebar-search" action="search.html">
    <button type="submit" class="search-button">
      <span class="icon-search" aria-hidden="true"></span>
    </button>
    <input name="q" type="text" id="search-list" class="search-input" placeholder="search" aria-label="Search" autocomplete="off" />
  </form>

  <ul class="sidebar-listNav">
    <li><a id="extras-list" href="#full-list">Pages</a></li>

    
      <li><a id="modules-list" href="#full-list">Modules</a></li>
    

    

    
  </ul>
  <div class="gradient"></div>
  <ul id="full-list" class="sidebar-fullList"></ul>
</section>

<section class="content">
  <div class="content-outer">
    <div id="content" class="content-inner">


<h1>Setup</h1>
<h2 id="installation" class="section-heading">
  <a href="#installation" class="hover-link"><span class="icon-link" aria-hidden="true"></span></a>
  Installation
</h2>

<h2 id="preparing-to-write-a-parser" class="section-heading">
  <a href="#preparing-to-write-a-parser" class="hover-link"><span class="icon-link" aria-hidden="true"></span></a>
  Preparing to write a parser
</h2>

<p>ExSpirit expects you to <code class="inline">use</code> it inside a module, to turn it into a parser module.</p>
<pre><code class="nohighlight makeup elixir"><span class="kd">defmodule</span><span class="w"> </span><span class="nc">ExSpiritTutorial.Setup.ExampleParser</span><span class="w"> </span><span class="k" data-group-id="1">do</span><span class="w">
  </span><span class="kn">use</span><span class="w"> </span><span class="nc">ExSpirit.Parser</span><span class="w">
  </span><span class="c1"># write the rest of your parsing code here...
</span><span class="k" data-group-id="1">end</span></code></pre>
<p>If you want to to parse text rather than a general stream of things, you need to tell ExSpirit, so that it loads the primitive test parsers (<code class="inline">char()</code>, <code class="inline">lit()</code>, etc.):</p>
<pre><code class="nohighlight makeup elixir"><span class="kd">defmodule</span><span class="w"> </span><span class="nc">ExSpiritTutorial.Setup.ExampleTextParser</span><span class="w"> </span><span class="k" data-group-id="2">do</span><span class="w">
  </span><span class="kn">use</span><span class="w"> </span><span class="nc">ExSpirit.Parser</span><span class="p">,</span><span class="w"> </span><span class="ss">text</span><span class="p">:</span><span class="w"> </span><span class="no">true</span><span class="w">
  </span><span class="c1"># write the rest of your parsing code here...
</span><span class="k" data-group-id="2">end</span></code></pre>
<p>This is what you’ll be doing most often.</p>
<p>You are now ready to implement <a href="tutorial/PEG%20Parsers.md">your first parsers</a>.</p>
<h2 id="implementation-details-why-use-instead-of-import" class="section-heading">
  <a href="#implementation-details-why-use-instead-of-import" class="hover-link"><span class="icon-link" aria-hidden="true"></span></a>
  Implementation Details - Why <code class="inline">use</code> instead of <code class="inline">import</code>?
</h2>

<p>At this point you might be surprised by having to <code class="inline">use</code> instead of <code class="inline">import</code> ExSpirit.
This is indeed an unconventional choice and ir merits some explanation.</p>
<p>In Elixir, there are three main mechanisms of using code defined in other modules:</p>
<ul>
<li><p>For functions, you can just call the qualified function name (possibly with an alias)For example, you can call the <code class="inline">trim/1</code> function in the <a href="https://hexdocs.pm/elixir/String.html"><code class="inline">String</code></a> module by writing <code class="inline">String.trim(string)</code>. This doesn’t require the called module to be available at compile-time</p>
</li>
<li><p>For macros, you must <code class="inline">import</code> or <code class="inline">require</code> the module, so that the macros are available at compile time</p>
</li>
<li><p>Finally, you can <code class="inline">use</code> the module. By writing <code class="inline">use ExternalModule</code> you allow the external module to define new macros and functions inside your own module. This is actually a simplification: when you use a module the module can do pretty much everything it wants to at compile time, not only define functions and macros, but this level of understanding is enough for what we’re after here.</p>
</li>
</ul>
<p>The functions defined when you <code class="inline">use</code> the module will behave exactly as if they were defined by you using <code class="inline">def</code> and <code class="inline">defp</code>. Semantically, it’s true that often there isn’t such a great difference between <code class="inline">use</code>ing or <code class="inline">import</code>ing the module, but there is an important detail. The Module is the fundamental compilation unit for the BEAM. Functions defined in your own module can be optimized more aggressively by the BEAM. Function calls across module can’t be optimized at all. When you <code class="inline">use</code> the module, the functions are defined inside your own module, and you get the benefit of some optimizations.</p>
<p>In the end, the choice to go with <code class="inline">use</code> instead of <code class="inline">import</code> was made based on performance alone.
In the case of ExSpirit, this performance increase has been confirmed by benchmarks.
For this reason, you must always <code class="inline">use ExSpirit.Parser</code> and never <code class="inline">import ExSpirit.Parser</code>,
because <code class="inline">import ExSpirit.Parser</code> will not work.</p>
<p>You are now ready to implement <a href="tutorial/PEG%20Parsers.md">your first parsers</a>.</p>

      <footer class="footer">
        <p>
          <span class="line">
            Built using
            <a href="https://github.com/elixir-lang/ex_doc" title="ExDoc" rel="help" target="_blank">ExDoc</a> (v0.18.1),
          </span>
          <span class="line">
            designed by
            <a href="https://twitter.com/dignifiedquire" target="_blank" title="@dignifiedquire">Friedel Ziegelmayer</a>.
            </span>
        </p>
        <button class="night-mode-toggle"><span class="sr-only">Switch theme</span></button>
      </footer>
    </div>
  </div>
</section>
</div>
  <script src="dist/app-778c9ef903.js"></script>
  
  <script src="dist/ex_doc_makeup-js.js"></script>
  
  
  </body>
</html>

