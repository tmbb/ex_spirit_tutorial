<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="generator" content="ExDoc v0.18.1">
    <title>First Parsers – ex_spirit_tutorial v0.1.0</title>
    <link rel="stylesheet" href="dist/app-c922dbe7ef.css" />
    
    <script src="dist/sidebar_items-3a2c0b4952.js"></script>
    
    <link rel="stylesheet" href="dist/ex_doc_makeup-css.css"/>
    
    
  </head>
  <body data-type="extras">
    <script>try { if(localStorage.getItem('night-mode')) document.body.className += ' night-mode'; } catch (e) { }</script>

<div class="main">
<button class="sidebar-toggle">
  <span class="icon-menu" aria-hidden="true"></span>
  <span class="sr-only">Toggle Sidebar</span>
</button>
<section class="sidebar">

  
  <a href="api-reference.html" class="sidebar-projectLink">
    <div class="sidebar-projectDetails">
      <h1 class="sidebar-projectName">
        ex_spirit_tutorial
      </h1>
      <h2 class="sidebar-projectVersion">
        v0.1.0
      </h2>
    </div>
    
  </a>

  <form class="sidebar-search" action="search.html">
    <button type="submit" class="search-button">
      <span class="icon-search" aria-hidden="true"></span>
    </button>
    <input name="q" type="text" id="search-list" class="search-input" placeholder="search" aria-label="Search" autocomplete="off" />
  </form>

  <ul class="sidebar-listNav">
    <li><a id="extras-list" href="#full-list">Pages</a></li>

    
      <li><a id="modules-list" href="#full-list">Modules</a></li>
    

    

    
  </ul>
  <div class="gradient"></div>
  <ul id="full-list" class="sidebar-fullList"></ul>
</section>

<section class="content">
  <div class="content-outer">
    <div id="content" class="content-inner">


<h1>First Parsers</h1>
<h2 id="introduction-to-the-context" class="section-heading">
  <a href="#introduction-to-the-context" class="hover-link"><span class="icon-link" aria-hidden="true"></span></a>
  Introduction to the Context
</h2>

<p>In the previous chapter you’ve defined a parsing module:</p>
<pre><code class="nohighlight makeup elixir"><span class="kd">defmodule</span><span class="w"> </span><span class="nc">ExSpiritTutorial.Setup.ExampleTextParser</span><span class="w"> </span><span class="k" data-group-id="3">do</span><span class="w">
  </span><span class="kn">use</span><span class="w"> </span><span class="nc">ExSpirit.Parser</span><span class="p">,</span><span class="w"> </span><span class="ss">text</span><span class="p">:</span><span class="w"> </span><span class="no">true</span><span class="w">
  </span><span class="c1"># write the rest of your parsing code here...
</span><span class="k" data-group-id="3">end</span></code></pre>
<p>ExSpirit has injected some functions and macros into that module that you can play with.
Let’s open up an <code class="inline">iex</code> session and import that module.</p>
<pre><code class="nohighlight makeup"><span class="gp">iex&gt;</span><span class="w"> </span><span class="kn">import</span><span class="w"> </span><span class="nc">ExSpiritTutorial.Setup.ExampleTextParser</span><span class="w">
</span><span class="nc">ExSpiritTutorial.Setup.ExampeTextParser</span></code></pre>
<p>Let’s parse a character:</p>
<pre><code class="nohighlight makeup"><span class="gp">iex&gt;</span><span class="w"> </span><span class="n">parse</span><span class="p" data-group-id="11">(</span><span class="s2">&quot;a&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">char</span><span class="p" data-group-id="10">()</span><span class="p" data-group-id="11">)</span><span class="w">
</span><span class="p" data-group-id="57">%</span><span class="nc" data-group-id="57">ExSpirit.Parser.Context</span><span class="p" data-group-id="57">{</span><span class="ss">column</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w"> </span><span class="ss">error</span><span class="p">:</span><span class="w"> </span><span class="no">nil</span><span class="p">,</span><span class="w"> </span><span class="ss">filename</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;&lt;unknown&gt;&quot;</span><span class="p">,</span><span class="w"> </span><span class="ss">line</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
 </span><span class="ss">position</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="ss">rest</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;&quot;</span><span class="p">,</span><span class="w"> </span><span class="ss">result</span><span class="p">:</span><span class="w"> </span><span class="mi">97</span><span class="p">,</span><span class="w"> </span><span class="ss">rulestack</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="48">[]</span><span class="p">,</span><span class="w"> </span><span class="ss">skipper</span><span class="p">:</span><span class="w"> </span><span class="no">nil</span><span class="p">,</span><span class="w"> </span><span class="ss">state</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="53">%{}</span><span class="p">,</span><span class="w">
 </span><span class="ss">userdata</span><span class="p">:</span><span class="w"> </span><span class="no">nil</span><span class="p" data-group-id="57">}</span></code></pre>
<p>What is this? We’ve tried to parse a character out of a string, and instead of a sensible result, like a character, or a list of characters or something like that, we get a monster <code class="inline">struct</code> with lots of fields!</p>
<p>Let’s try to decompose the <code class="inline">struct</code> in a way that makes sense:</p>
<pre><code class="nohighlight makeup"><span class="gp">iex&gt;</span><span class="w"> </span><span class="n">context</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">parse</span><span class="p" data-group-id="14">(</span><span class="s2">&quot;a&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">char</span><span class="p" data-group-id="13">()</span><span class="p" data-group-id="14">)</span><span class="w">
</span><span class="p" data-group-id="60">%</span><span class="nc" data-group-id="60">ExSpirit.Parser.Context</span><span class="p" data-group-id="60">{</span><span class="ss">column</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w"> </span><span class="ss">error</span><span class="p">:</span><span class="w"> </span><span class="no">nil</span><span class="p">,</span><span class="w"> </span><span class="ss">filename</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;&lt;unknown&gt;&quot;</span><span class="p">,</span><span class="w"> </span><span class="ss">line</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
 </span><span class="ss">position</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="ss">rest</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;&quot;</span><span class="p">,</span><span class="w"> </span><span class="ss">result</span><span class="p">:</span><span class="w"> </span><span class="mi">97</span><span class="p">,</span><span class="w"> </span><span class="ss">rulestack</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="50">[]</span><span class="p">,</span><span class="w"> </span><span class="ss">skipper</span><span class="p">:</span><span class="w"> </span><span class="no">nil</span><span class="p">,</span><span class="w"> </span><span class="ss">state</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="55">%{}</span><span class="p">,</span><span class="w">
 </span><span class="ss">userdata</span><span class="p">:</span><span class="w"> </span><span class="no">nil</span><span class="p" data-group-id="60">}</span><span class="w">
</span><span class="gp">iex&gt;</span><span class="w"> </span><span class="n">context</span><span class="o">.</span><span class="n">result</span><span class="w">
</span><span class="mi">97</span><span class="w">
</span><span class="gp">iex&gt;</span><span class="w"> </span><span class="sc">?a</span><span class="w">
</span><span class="mi">97</span></code></pre>
<p>So, the <code class="inline">struct</code> contains a <code class="inline">result</code>, which is what we expect: we’ve parse the character <code class="inline">?a</code> (remember that Elixir makes no distinction between characters and numbers).
Let’s explore it further. The <code class="inline">filename</code>, <code class="inline">line</code>, <code class="inline">column</code> and <code class="inline">position</code> are pretty obvious:</p>
<pre><code class="nohighlight makeup"><span class="gp">iex&gt;</span><span class="w"> </span><span class="n">context</span><span class="o">.</span><span class="n">filename</span><span class="w">
</span><span class="s2">&quot;&lt;unknown&gt;&quot;</span><span class="w">
</span><span class="gp">iex&gt;</span><span class="w"> </span><span class="p" data-group-id="20">{</span><span class="n">context</span><span class="o">.</span><span class="n">line</span><span class="p">,</span><span class="w"> </span><span class="n">context</span><span class="o">.</span><span class="n">column</span><span class="p" data-group-id="20">}</span><span class="w">
</span><span class="p" data-group-id="39">{</span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="p" data-group-id="39">}</span><span class="w">
</span><span class="gp">iex&gt;</span><span class="w"> </span><span class="n">context</span><span class="o">.</span><span class="n">position</span><span class="w">
</span><span class="mi">1</span></code></pre>
<p>The represent the position of the parser along the string:</p>
<ul>
<li>The <code class="inline">filename</code> is <code class="inline">&quot;&lt;unknown&gt;&quot;</code>, because we are parsing from a string and not from a file
</li>
<li>The <code class="inline">line</code> and <code class="inline">column</code> fields represent the current line and column, and per the usual convention ExSpirit starts counting line and column numbers at 1 instead of 0
</li>
<li>The <code class="inline">position</code> field represents the position along the sting <em>in bytes</em> (not characters!)
</li>
</ul>
<p>These fields are very useful for error reporting.
Besides that, we can tag the tokens we parse with position information, which can be useful for debugging later.</p>
<pre><code class="nohighlight makeup"><span class="gp">iex&gt;</span><span class="w"> </span><span class="n">context</span><span class="o">.</span><span class="n">error</span><span class="w">
</span><span class="no">nil</span></code></pre>
<p>There is a field called <code class="inline">error</code>, which is currently <code class="inline">nil</code>.
This means that the parser has succeeded.
The absence of error means the presence of success.
We will explore different kinds of errors later.</p>
<p>We will ignore the fields <code class="inline">rulestack</code>, <code class="inline">skipper</code>, <code class="inline">state</code> and <code class="inline">userdata</code> for now.
We will go back to them later, of course, as some of these fields are essential to parse context-sensitive grammars</p>
<p>We still haven’t discussed the <code class="inline">rest</code> field.
The <code class="inline">rest</code> field is merely the bytes we still haven’t consumed.
Let’s see what <code class="inline">iex</code> tells us:</p>
<pre><code class="nohighlight makeup"><span class="gp">iex&gt;</span><span class="w"> </span><span class="n">context</span><span class="o">.</span><span class="n">rest</span><span class="w">
</span><span class="s2">&quot;&quot;</span></code></pre>
<p>This means we’ve consume the whole string and there is nothing left.
This is expected, as we’ve tried to parse a single character out of a string with a single character.</p>
<p>Let’s try another example:</p>
<pre><code class="nohighlight makeup"><span class="gp">iex&gt;</span><span class="w"> </span><span class="p" data-group-id="4">%{</span><span class="ss">result</span><span class="p">:</span><span class="w"> </span><span class="n">result</span><span class="p">,</span><span class="w"> </span><span class="ss">rest</span><span class="p">:</span><span class="w"> </span><span class="n">rest</span><span class="p" data-group-id="4">}</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">parse</span><span class="p" data-group-id="19">(</span><span class="s2">&quot;ab&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">char</span><span class="p" data-group-id="18">()</span><span class="p" data-group-id="19">)</span><span class="w">
</span><span class="p" data-group-id="65">%</span><span class="nc" data-group-id="65">ExSpirit.Parser.Context</span><span class="p" data-group-id="65">{</span><span class="ss">column</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w"> </span><span class="ss">error</span><span class="p">:</span><span class="w"> </span><span class="no">nil</span><span class="p">,</span><span class="w"> </span><span class="ss">filename</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;&lt;unknown&gt;&quot;</span><span class="p">,</span><span class="w"> </span><span class="ss">line</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
 </span><span class="ss">position</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="ss">rest</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;b&quot;</span><span class="p">,</span><span class="w"> </span><span class="ss">result</span><span class="p">:</span><span class="w"> </span><span class="mi">97</span><span class="p">,</span><span class="w"> </span><span class="ss">rulestack</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="52">[]</span><span class="p">,</span><span class="w"> </span><span class="ss">skipper</span><span class="p">:</span><span class="w"> </span><span class="no">nil</span><span class="p">,</span><span class="w"> </span><span class="ss">state</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="63">%{}</span><span class="p">,</span><span class="w">
 </span><span class="ss">userdata</span><span class="p">:</span><span class="w"> </span><span class="no">nil</span><span class="p" data-group-id="65">}</span><span class="w">
</span><span class="gp">iex&gt;</span><span class="w"> </span><span class="p" data-group-id="75">{</span><span class="n">result</span><span class="p">,</span><span class="w"> </span><span class="n">rest</span><span class="p" data-group-id="75">}</span><span class="w">
</span><span class="p" data-group-id="86">{</span><span class="mi">97</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;b&quot;</span><span class="p" data-group-id="86">}</span><span class="w">
</span><span class="gp">iex&gt;</span><span class="w"> </span><span class="sc">?a</span><span class="w">
</span><span class="mi">97</span></code></pre>
<p>Now we’ve tried to parse a single character out of a string with two characters.
We can see that the <code class="inline">result</code> is the same as above, but now the <code class="inline">rest</code> is different.
There is still a binary with one byte left (i.e. <code class="inline">&quot;b&quot;</code>).</p>
<p>This “monster <code class="inline">struct</code>” is the Context.
While consuming bytes from the stream, ExSpirit will thread the Context along, updating it as bytes are consumed.</p>
<p>The primitive parsers abstract away the context, so that you only see it in the final result value.
In the intermediate steps it looks as if you’re just defining declarative grammar rules that operate on a simple string.
This allows for simpler parser definitions for PEG parsers.</p>
<p>On the other hand, the real power of ExSpirit lies in the ability to have the context available at any moment, so that you can:</p>
<ul>
<li>annotate tokens with context data (like position information)
</li>
<li>pass constant parameters to a rule deep into the grammar
</li>
<li>or even feed data from the context to the next parser so that it can use that information on what to do next.
</li>
</ul>
<p>This allows you to create context-dependent combinators, which you can use to parse context-sensitive languages.</p>
<h3 id="unicode-and-other-encodings" class="section-heading">
  <a href="#unicode-and-other-encodings" class="hover-link"><span class="icon-link" aria-hidden="true"></span></a>
  Unicode and Other Encodings
</h3>

<p>If you’re paying attention, you’ve probably noticed how we’ve talked about characters and bytes in different contexts.
If you’re interested in parsing files encoded with UTF-8 that may contain characters outside the ASCII range, this is an important distinction.
ExSpirit uses UTF-8 underneath for all character-related functionality, which means it handles Unicode just fine.
For example, let’s try to parse a character out of this string:</p>
<pre><code class="nohighlight makeup"><span class="gp">iex&gt;</span><span class="w"> </span><span class="p" data-group-id="12">%{</span><span class="ss">result</span><span class="p">:</span><span class="w"> </span><span class="n">result</span><span class="p">,</span><span class="w"> </span><span class="ss">rest</span><span class="p">:</span><span class="w"> </span><span class="n">rest</span><span class="p">,</span><span class="w"> </span><span class="ss">position</span><span class="p">:</span><span class="w"> </span><span class="n">position</span><span class="p" data-group-id="12">}</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">parse</span><span class="p" data-group-id="38">(</span><span class="s2">&quot;Átomo&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">char</span><span class="p" data-group-id="37">()</span><span class="p" data-group-id="38">)</span><span class="w">
</span><span class="p" data-group-id="79">%</span><span class="nc" data-group-id="79">ExSpirit.Parser.Context</span><span class="p" data-group-id="79">{</span><span class="ss">column</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w"> </span><span class="ss">error</span><span class="p">:</span><span class="w"> </span><span class="no">nil</span><span class="p">,</span><span class="w"> </span><span class="ss">filename</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;&lt;unknown&gt;&quot;</span><span class="p">,</span><span class="w"> </span><span class="ss">line</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
 </span><span class="ss">position</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w"> </span><span class="ss">rest</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;tomo&quot;</span><span class="p">,</span><span class="w"> </span><span class="ss">result</span><span class="p">:</span><span class="w"> </span><span class="mi">193</span><span class="p">,</span><span class="w"> </span><span class="ss">rulestack</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="62">[]</span><span class="p">,</span><span class="w"> </span><span class="ss">skipper</span><span class="p">:</span><span class="w"> </span><span class="no">nil</span><span class="p">,</span><span class="w">
 </span><span class="ss">state</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="71">%{}</span><span class="p">,</span><span class="w"> </span><span class="ss">userdata</span><span class="p">:</span><span class="w"> </span><span class="no">nil</span><span class="p" data-group-id="79">}</span><span class="w">
</span><span class="gp">iex&gt;</span><span class="w"> </span><span class="p" data-group-id="89">{</span><span class="n">result</span><span class="p">,</span><span class="w"> </span><span class="n">rest</span><span class="p">,</span><span class="w"> </span><span class="n">position</span><span class="p" data-group-id="89">}</span><span class="w">
</span><span class="p" data-group-id="95">{</span><span class="mi">193</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;tomo&quot;</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="p" data-group-id="95">}</span><span class="w">
</span><span class="gp">iex&gt;</span><span class="w"> </span><span class="sc">?Á</span><span class="w">
</span><span class="mi">193</span><span class="w">
</span><span class="gp">iex&gt;</span><span class="w"> </span><span class="n">byte_size</span><span class="p" data-group-id="101">(</span><span class="s2">&quot;Á&quot;</span><span class="p" data-group-id="101">)</span><span class="w">
</span><span class="mi">2</span></code></pre>
<p>You can see that ExSpirit has correctly parsed the single character <code class="inline">?Á</code>, even though it’s not an ASCII character.
Although a single character was parsed, two bytes were consumed, and that’s why <code class="inline">position</code> is two.</p>
<p>Although ExSpirit handles UTF-8 by default, this doesn’t mean that ExSpirit is restricted to parsing UTF-8.
You can write your own primitive parsers that accept a certain encoding and use ExSpirit’s combinator parsers on top of those primiive parsers.</p>
<h2 id="from-a-peg-grammar-to-an-exspirit-grammar" class="section-heading">
  <a href="#from-a-peg-grammar-to-an-exspirit-grammar" class="hover-link"><span class="icon-link" aria-hidden="true"></span></a>
  From a PEG Grammar to an ExSpirit Grammar
</h2>

<p>A PEG grammar supports the following operations:</p>
<ul>
<li>Sequence: <code class="inline">e1 e2</code> - parser <code class="inline">e1</code> after parser <code class="inline">e2</code>
</li>
<li>Ordered choice: <code class="inline">e1 / e2</code> - parser <code class="inline">e1</code> or parser <code class="inline">e2</code>, the fist that matches
</li>
<li>Zero-or-more: <code class="inline">e*</code> - parser <code class="inline">e</code>, repeated zero or more times
</li>
<li>One-or-more: <code class="inline">e+</code> - parser <code class="inline">e</code>, repeated one or more times
</li>
<li>Optional: <code class="inline">e?</code> - parser <code class="inline">e</code> or nothing
</li>
<li>And-predicate: <code class="inline">&amp;e</code>, also called positive lookahead: test if parser <code class="inline">e</code> matches the rest of the input, but doesn’t consume input itself. Succeeds if it matches the input.
</li>
<li>Not-predicate: <code class="inline">!e</code>, also called negative lookahead: test if parser <code class="inline">e</code> matches the rest of the input, and succeeds it it fails to match.
</li>
</ul>
<p>Now let’s see how we can emulate a PEG grammar with ExSpirit.
Let’s define a parser module with some parsers:</p>
<pre><code class="nohighlight makeup elixir"><span class="kd">defmodule</span><span class="w"> </span><span class="nc">ExSpiritTutorial.PegParsers.PegOperations</span><span class="w"> </span><span class="k" data-group-id="46">do</span><span class="w">
  </span><span class="kn">use</span><span class="w"> </span><span class="nc">ExSpirit.Parser</span><span class="p">,</span><span class="w"> </span><span class="ss">text</span><span class="p">:</span><span class="w"> </span><span class="no">true</span><span class="w">

  </span><span class="n">defrule</span><span class="w"> </span><span class="n">e1</span><span class="p" data-group-id="22">(</span><span class="w">
    </span><span class="n">char</span><span class="p" data-group-id="21">(</span><span class="sc">?x</span><span class="p" data-group-id="21">)</span><span class="p" data-group-id="22">)</span><span class="w">

  </span><span class="n">defrule</span><span class="w"> </span><span class="n">e2</span><span class="p" data-group-id="41">(</span><span class="w">
    </span><span class="n">char</span><span class="p" data-group-id="40">(</span><span class="sc">?y</span><span class="p" data-group-id="40">)</span><span class="p" data-group-id="41">)</span><span class="w">

  </span><span class="n">defrule</span><span class="w"> </span><span class="n">e</span><span class="p" data-group-id="45">(</span><span class="w">
    </span><span class="n">char</span><span class="p" data-group-id="44">(</span><span class="sc">?a</span><span class="p" data-group-id="44">)</span><span class="p" data-group-id="45">)</span><span class="w">
</span><span class="k" data-group-id="46">end</span></code></pre>
<p>Now, fire up <code class="inline">iex</code> and import the module to play with it a little:</p>
<pre><code class="nohighlight makeup"><span class="gp">iex&gt;</span><span class="w"> </span><span class="kn">import</span><span class="w"> </span><span class="nc">ExSpiritTutorial.PegParsers.PegOperations</span><span class="w">
</span><span class="nc">ExSpiritTutorial.PegParsers.PegOperations</span></code></pre>
<h3 id="sequence-seq" class="section-heading">
  <a href="#sequence-seq" class="hover-link"><span class="icon-link" aria-hidden="true"></span></a>
  Sequence - <code class="inline">seq</code>
</h3>

<p>In a PEG grammar, sequence is denoted by juxtaposition of parsers: <code class="inline">e1 e2</code>.
Instead of using this syntax, ExSpirit defines the <a href="https://hexdocs.pm/ex_spirit/ExSpirit.Parser.html#seq/2" title=""><code class="inline">ExSpirit.Parser.seq/2</code></a> combinator:</p>
<pre><code class="nohighlight makeup"><span class="gp">iex&gt;</span><span class="w"> </span><span class="p" data-group-id="5">%{</span><span class="ss">error</span><span class="p">:</span><span class="w"> </span><span class="no">nil</span><span class="p" data-group-id="5">}</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">parse</span><span class="p" data-group-id="25">(</span><span class="s2">&quot;xy&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">seq</span><span class="p" data-group-id="24">(</span><span class="p" data-group-id="23">[</span><span class="n">e1</span><span class="p">,</span><span class="w"> </span><span class="n">e2</span><span class="p" data-group-id="23">]</span><span class="p" data-group-id="24">)</span><span class="p" data-group-id="25">)</span><span class="w">
</span><span class="p" data-group-id="72">%</span><span class="nc" data-group-id="72">ExSpirit.Parser.Context</span><span class="p" data-group-id="72">{</span><span class="ss">column</span><span class="p">:</span><span class="w"> </span><span class="mi">3</span><span class="p">,</span><span class="w"> </span><span class="ss">error</span><span class="p">:</span><span class="w"> </span><span class="no">nil</span><span class="p">,</span><span class="w"> </span><span class="ss">filename</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;&lt;unknown&gt;&quot;</span><span class="p">,</span><span class="w"> </span><span class="ss">line</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
 </span><span class="ss">position</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w"> </span><span class="ss">rest</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;&quot;</span><span class="p">,</span><span class="w"> </span><span class="ss">result</span><span class="p">:</span><span class="w"> </span><span class="s1">'xy'</span><span class="p">,</span><span class="w"> </span><span class="ss">rulestack</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="58">[]</span><span class="p">,</span><span class="w"> </span><span class="ss">skipper</span><span class="p">:</span><span class="w"> </span><span class="no">nil</span><span class="p">,</span><span class="w"> </span><span class="ss">state</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="66">%{}</span><span class="p">,</span><span class="w">
 </span><span class="ss">userdata</span><span class="p">:</span><span class="w"> </span><span class="no">nil</span><span class="p" data-group-id="72">}</span></code></pre>
<p>If you try to parse an invalid sequence, it will fail with an error.</p>
<pre><code class="nohighlight makeup"><span class="gp">iex&gt;</span><span class="w"> </span><span class="p" data-group-id="6">%{</span><span class="ss">error</span><span class="p">:</span><span class="w"> </span><span class="n">error</span><span class="p" data-group-id="6">}</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">parse</span><span class="p" data-group-id="30">(</span><span class="s2">&quot;xa&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">seq</span><span class="p" data-group-id="29">(</span><span class="p" data-group-id="28">[</span><span class="n">e1</span><span class="p">,</span><span class="w"> </span><span class="n">e2</span><span class="p" data-group-id="28">]</span><span class="p" data-group-id="29">)</span><span class="p" data-group-id="30">)</span><span class="w">
</span><span class="p" data-group-id="115">%</span><span class="nc" data-group-id="115">ExSpirit.Parser.Context</span><span class="p" data-group-id="115">{</span><span class="ss">column</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w">
 </span><span class="ss">error</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="98">%</span><span class="nc" data-group-id="98">ExSpirit.Parser.ParseException</span><span class="p" data-group-id="98">{</span><span class="ss">context</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="88">%</span><span class="nc" data-group-id="88">ExSpirit.Parser.Context</span><span class="p" data-group-id="88">{</span><span class="ss">column</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w">
   </span><span class="ss">error</span><span class="p">:</span><span class="w"> </span><span class="no">nil</span><span class="p">,</span><span class="w"> </span><span class="ss">filename</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;&lt;unknown&gt;&quot;</span><span class="p">,</span><span class="w"> </span><span class="ss">line</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="ss">position</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="ss">rest</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;a&quot;</span><span class="p">,</span><span class="w">
   </span><span class="ss">result</span><span class="p">:</span><span class="w"> </span><span class="mi">120</span><span class="p">,</span><span class="w"> </span><span class="ss">rulestack</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="70">[</span><span class="ss">:e2</span><span class="p" data-group-id="70">]</span><span class="p">,</span><span class="w"> </span><span class="ss">skipper</span><span class="p">:</span><span class="w"> </span><span class="no">nil</span><span class="p">,</span><span class="w"> </span><span class="ss">state</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="84">%{}</span><span class="p">,</span><span class="w"> </span><span class="ss">userdata</span><span class="p">:</span><span class="w"> </span><span class="no">nil</span><span class="p" data-group-id="88">}</span><span class="p">,</span><span class="w">
  </span><span class="ss">extradata</span><span class="p">:</span><span class="w"> </span><span class="no">nil</span><span class="p">,</span><span class="w">
  </span><span class="ss">message</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Tried parsing out any of the the characters of `'y'` but failed due to the input character not matching&quot;</span><span class="p" data-group-id="98">}</span><span class="p">,</span><span class="w">
 </span><span class="ss">filename</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;&lt;unknown&gt;&quot;</span><span class="p">,</span><span class="w"> </span><span class="ss">line</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="ss">position</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="ss">rest</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;a&quot;</span><span class="p">,</span><span class="w"> </span><span class="ss">result</span><span class="p">:</span><span class="w"> </span><span class="mi">120</span><span class="p">,</span><span class="w">
 </span><span class="ss">rulestack</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="106">[]</span><span class="p">,</span><span class="w"> </span><span class="ss">skipper</span><span class="p">:</span><span class="w"> </span><span class="no">nil</span><span class="p">,</span><span class="w"> </span><span class="ss">state</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="111">%{}</span><span class="p">,</span><span class="w"> </span><span class="ss">userdata</span><span class="p">:</span><span class="w"> </span><span class="no">nil</span><span class="p" data-group-id="115">}</span></code></pre>
<p>In fact, the error is quite descriptive:</p>
<pre><code class="nohighlight makeup"><span class="gp">iex&gt;</span><span class="w"> </span><span class="n">error</span><span class="w">
</span><span class="p" data-group-id="74">%</span><span class="nc" data-group-id="74">ExSpirit.Parser.ParseException</span><span class="p" data-group-id="74">{</span><span class="ss">context</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="54">%</span><span class="nc" data-group-id="54">ExSpirit.Parser.Context</span><span class="p" data-group-id="54">{</span><span class="ss">column</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w">
  </span><span class="ss">error</span><span class="p">:</span><span class="w"> </span><span class="no">nil</span><span class="p">,</span><span class="w"> </span><span class="ss">filename</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;&lt;unknown&gt;&quot;</span><span class="p">,</span><span class="w"> </span><span class="ss">line</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="ss">position</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="ss">rest</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;a&quot;</span><span class="p">,</span><span class="w">
  </span><span class="ss">result</span><span class="p">:</span><span class="w"> </span><span class="mi">120</span><span class="p">,</span><span class="w"> </span><span class="ss">rulestack</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="47">[</span><span class="ss">:e2</span><span class="p" data-group-id="47">]</span><span class="p">,</span><span class="w"> </span><span class="ss">skipper</span><span class="p">:</span><span class="w"> </span><span class="no">nil</span><span class="p">,</span><span class="w"> </span><span class="ss">state</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="51">%{}</span><span class="p">,</span><span class="w"> </span><span class="ss">userdata</span><span class="p">:</span><span class="w"> </span><span class="no">nil</span><span class="p" data-group-id="54">}</span><span class="p">,</span><span class="w">
 </span><span class="ss">extradata</span><span class="p">:</span><span class="w"> </span><span class="no">nil</span><span class="p">,</span><span class="w">
 </span><span class="ss">message</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Tried parsing out any of the the characters of `'y'` but failed due to the input character not matching&quot;</span><span class="p" data-group-id="74">}</span></code></pre>
<p>It tells you dat at that context (<code class="inline">position: 1</code>, that is, after consuming a single byte), it was expecting to find one of the characters in <code class="inline">[?y]</code>.</p>
<p>You can see that <code class="inline">seq([e1, e2])</code> is equivalent to <code class="inline">e1 e2</code> in PEG notation.</p>
<h3 id="ordered-choice-alt" class="section-heading">
  <a href="#ordered-choice-alt" class="hover-link"><span class="icon-link" aria-hidden="true"></span></a>
  Ordered Choice - <code class="inline">alt</code>
</h3>

<p>In a PEG grammar, sequence is denoted by the <code class="inline">/</code> operator: <code class="inline">e1 / e2</code>.
Instead of using this syntax, ExSpirit defines the <a href="https://hexdocs.pm/ex_spirit/ExSpirit.Parser.html#alt/2" title=""><code class="inline">ExSpirit.Parser.alt/2</code></a> combinator:</p>
<pre><code class="nohighlight makeup"><span class="gp">iex&gt;</span><span class="w"> </span><span class="p" data-group-id="9">%{</span><span class="ss">error</span><span class="p">:</span><span class="w"> </span><span class="no">nil</span><span class="p" data-group-id="9">}</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">parse</span><span class="p" data-group-id="36">(</span><span class="s2">&quot;x&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">alt</span><span class="p" data-group-id="35">(</span><span class="p" data-group-id="34">[</span><span class="n">e1</span><span class="p">,</span><span class="w"> </span><span class="n">e2</span><span class="p" data-group-id="34">]</span><span class="p" data-group-id="35">)</span><span class="p" data-group-id="36">)</span><span class="w">
</span><span class="p" data-group-id="73">%</span><span class="nc" data-group-id="73">ExSpirit.Parser.Context</span><span class="p" data-group-id="73">{</span><span class="ss">column</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w"> </span><span class="ss">error</span><span class="p">:</span><span class="w"> </span><span class="no">nil</span><span class="p">,</span><span class="w"> </span><span class="ss">filename</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;&lt;unknown&gt;&quot;</span><span class="p">,</span><span class="w"> </span><span class="ss">line</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
 </span><span class="ss">position</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="ss">rest</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;&quot;</span><span class="p">,</span><span class="w"> </span><span class="ss">result</span><span class="p">:</span><span class="w"> </span><span class="mi">120</span><span class="p">,</span><span class="w"> </span><span class="ss">rulestack</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="59">[]</span><span class="p">,</span><span class="w"> </span><span class="ss">skipper</span><span class="p">:</span><span class="w"> </span><span class="no">nil</span><span class="p">,</span><span class="w"> </span><span class="ss">state</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="67">%{}</span><span class="p">,</span><span class="w">
 </span><span class="ss">userdata</span><span class="p">:</span><span class="w"> </span><span class="no">nil</span><span class="p" data-group-id="73">}</span><span class="w">

</span><span class="gp">iex&gt;</span><span class="w"> </span><span class="p" data-group-id="80">%{</span><span class="ss">error</span><span class="p">:</span><span class="w"> </span><span class="no">nil</span><span class="p" data-group-id="80">}</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">parse</span><span class="p" data-group-id="94">(</span><span class="s2">&quot;y&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">alt</span><span class="p" data-group-id="93">(</span><span class="p" data-group-id="92">[</span><span class="n">e1</span><span class="p">,</span><span class="w"> </span><span class="n">e2</span><span class="p" data-group-id="92">]</span><span class="p" data-group-id="93">)</span><span class="p" data-group-id="94">)</span><span class="w">
</span><span class="p" data-group-id="117">%</span><span class="nc" data-group-id="117">ExSpirit.Parser.Context</span><span class="p" data-group-id="117">{</span><span class="ss">column</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w"> </span><span class="ss">error</span><span class="p">:</span><span class="w"> </span><span class="no">nil</span><span class="p">,</span><span class="w"> </span><span class="ss">filename</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;&lt;unknown&gt;&quot;</span><span class="p">,</span><span class="w"> </span><span class="ss">line</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
 </span><span class="ss">position</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="ss">rest</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;&quot;</span><span class="p">,</span><span class="w"> </span><span class="ss">result</span><span class="p">:</span><span class="w"> </span><span class="mi">121</span><span class="p">,</span><span class="w"> </span><span class="ss">rulestack</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="107">[]</span><span class="p">,</span><span class="w"> </span><span class="ss">skipper</span><span class="p">:</span><span class="w"> </span><span class="no">nil</span><span class="p">,</span><span class="w"> </span><span class="ss">state</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="114">%{}</span><span class="p">,</span><span class="w">
 </span><span class="ss">userdata</span><span class="p">:</span><span class="w"> </span><span class="no">nil</span><span class="p" data-group-id="117">}</span></code></pre>
<p>It will fail when given an invalid character, of course:</p>
<pre><code class="nohighlight makeup"><span class="gp">iex&gt;</span><span class="w"> </span><span class="p" data-group-id="7">%{</span><span class="ss">error</span><span class="p">:</span><span class="w"> </span><span class="n">error</span><span class="p" data-group-id="7">}</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">parse</span><span class="p" data-group-id="33">(</span><span class="s2">&quot;b&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">alt</span><span class="p" data-group-id="32">(</span><span class="p" data-group-id="31">[</span><span class="n">e1</span><span class="p">,</span><span class="w"> </span><span class="n">e2</span><span class="p" data-group-id="31">]</span><span class="p" data-group-id="32">)</span><span class="p" data-group-id="33">)</span><span class="w">
</span><span class="p" data-group-id="113">%</span><span class="nc" data-group-id="113">ExSpirit.Parser.Context</span><span class="p" data-group-id="113">{</span><span class="ss">column</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
 </span><span class="ss">error</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="96">%</span><span class="nc" data-group-id="96">ExSpirit.Parser.ParseException</span><span class="p" data-group-id="96">{</span><span class="ss">context</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="87">%</span><span class="nc" data-group-id="87">ExSpirit.Parser.Context</span><span class="p" data-group-id="87">{</span><span class="ss">column</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
   </span><span class="ss">error</span><span class="p">:</span><span class="w"> </span><span class="no">nil</span><span class="p">,</span><span class="w"> </span><span class="ss">filename</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;&lt;unknown&gt;&quot;</span><span class="p">,</span><span class="w"> </span><span class="ss">line</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="ss">position</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="ss">rest</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;b&quot;</span><span class="p">,</span><span class="w">
   </span><span class="ss">result</span><span class="p">:</span><span class="w"> </span><span class="no">nil</span><span class="p">,</span><span class="w"> </span><span class="ss">rulestack</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="69">[</span><span class="ss">:e2</span><span class="p" data-group-id="69">]</span><span class="p">,</span><span class="w"> </span><span class="ss">skipper</span><span class="p">:</span><span class="w"> </span><span class="no">nil</span><span class="p">,</span><span class="w"> </span><span class="ss">state</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="83">%{}</span><span class="p">,</span><span class="w"> </span><span class="ss">userdata</span><span class="p">:</span><span class="w"> </span><span class="no">nil</span><span class="p" data-group-id="87">}</span><span class="p">,</span><span class="w">
  </span><span class="ss">extradata</span><span class="p">:</span><span class="w"> </span><span class="no">nil</span><span class="p">,</span><span class="w">
  </span><span class="ss">message</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Tried parsing out any of the the characters of `'y'` but failed due to the input character not matching&quot;</span><span class="p" data-group-id="96">}</span><span class="p">,</span><span class="w">
 </span><span class="ss">filename</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;&lt;unknown&gt;&quot;</span><span class="p">,</span><span class="w"> </span><span class="ss">line</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="ss">position</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="ss">rest</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;b&quot;</span><span class="p">,</span><span class="w"> </span><span class="ss">result</span><span class="p">:</span><span class="w"> </span><span class="no">nil</span><span class="p">,</span><span class="w">
 </span><span class="ss">rulestack</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="104">[]</span><span class="p">,</span><span class="w"> </span><span class="ss">skipper</span><span class="p">:</span><span class="w"> </span><span class="no">nil</span><span class="p">,</span><span class="w"> </span><span class="ss">state</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="110">%{}</span><span class="p">,</span><span class="w"> </span><span class="ss">userdata</span><span class="p">:</span><span class="w"> </span><span class="no">nil</span><span class="p" data-group-id="113">}</span><span class="w">

</span><span class="gp">iex&gt;</span><span class="w"> </span><span class="n">error</span><span class="w">
</span><span class="p" data-group-id="134">%</span><span class="nc" data-group-id="134">ExSpirit.Parser.ParseException</span><span class="p" data-group-id="134">{</span><span class="ss">context</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="129">%</span><span class="nc" data-group-id="129">ExSpirit.Parser.Context</span><span class="p" data-group-id="129">{</span><span class="ss">column</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
  </span><span class="ss">error</span><span class="p">:</span><span class="w"> </span><span class="no">nil</span><span class="p">,</span><span class="w"> </span><span class="ss">filename</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;&lt;unknown&gt;&quot;</span><span class="p">,</span><span class="w"> </span><span class="ss">line</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="ss">position</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="ss">rest</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;b&quot;</span><span class="p">,</span><span class="w">
  </span><span class="ss">result</span><span class="p">:</span><span class="w"> </span><span class="no">nil</span><span class="p">,</span><span class="w"> </span><span class="ss">rulestack</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="124">[</span><span class="ss">:e2</span><span class="p" data-group-id="124">]</span><span class="p">,</span><span class="w"> </span><span class="ss">skipper</span><span class="p">:</span><span class="w"> </span><span class="no">nil</span><span class="p">,</span><span class="w"> </span><span class="ss">state</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="127">%{}</span><span class="p">,</span><span class="w"> </span><span class="ss">userdata</span><span class="p">:</span><span class="w"> </span><span class="no">nil</span><span class="p" data-group-id="129">}</span><span class="p">,</span><span class="w">
 </span><span class="ss">extradata</span><span class="p">:</span><span class="w"> </span><span class="no">nil</span><span class="p">,</span><span class="w">
 </span><span class="ss">message</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Tried parsing out any of the the characters of `'y'` but failed due to the input character not matching&quot;</span><span class="p" data-group-id="134">}</span><span class="w">
</span><span class="gp">iex(13)&gt;</span></code></pre>
<p>Look at the error message above.
It’s telling us that the parser failed to parse the <code class="inline">?y</code> character. Why?
Remember that PEG parsers try to match the alternatives in order.
When the first alternative  (<code class="inline">?x</code>) fails, there is no problem, as there are still other alternatives to test.
But when the second alternative  (<code class="inline">?y</code>) fails, there are no more alternatives, and the parser fails with the error.</p>
<p>You can see that <code class="inline">alt([e1, e2])</code> is equivalent to <code class="inline">e1 / e2</code> in PEG notation.</p>
<h3 id="zero-or-more-repeat-2" class="section-heading">
  <a href="#zero-or-more-repeat-2" class="hover-link"><span class="icon-link" aria-hidden="true"></span></a>
  Zero Or More - <code class="inline">repeat/2</code>
</h3>

<p>In a PEG grammar, sequence is denoted by the <code class="inline">*</code> postfix operator: <code class="inline">e*</code>.
Instead of using this syntax, ExSpirit defines the <a href="https://hexdocs.pm/ex_spirit/ExSpirit.Parser.html#repeat/2" title=""><code class="inline">ExSpirit.Parser.repeat/2</code></a> combinator:</p>
<pre><code class="">iex&gt; %{error: nil} = parse(&quot;&quot;, repeat(e))
%ExSpirit.Parser.Context{column: 1, error: nil, filename: &quot;&lt;unknown&gt;&quot;, line: 1,
 position: 0, rest: &quot;&quot;, result: [], rulestack: [], skipper: nil, state: %{},
 userdata: nil}

iex&gt; %{error: nil} = parse(&quot;a&quot;, repeat(e))
%ExSpirit.Parser.Context{column: 2, error: nil, filename: &quot;&lt;unknown&gt;&quot;, line: 1,
 position: 1, rest: &quot;&quot;, result: 'a', rulestack: [], skipper: nil, state: %{},
 userdata: nil}

iex&gt; %{error: nil} = parse(&quot;aa&quot;, repeat(e))
%ExSpirit.Parser.Context{column: 3, error: nil, filename: &quot;&lt;unknown&gt;&quot;, line: 1,
 position: 2, rest: &quot;&quot;, result: 'aa', rulestack: [], skipper: nil, state: %{},
 userdata: nil}

iex&gt; %{error: nil} = parse(&quot;aaaa&quot;, repeat(e))
%ExSpirit.Parser.Context{column: 5, error: nil, filename: &quot;&lt;unknown&gt;&quot;, line: 1,
 position: 4, rest: &quot;&quot;, result: 'aaaa', rulestack: [], skipper: nil, state: %{},
 userdata: nil}</code></pre>
<p>The <code class="inline">repeat</code> combinator will apply the parser given as argument as many times as possible and gather the results into a list.
As you can see, the result is always a list of the <code class="inline">?a</code> character, repeated on or more times.</p>
<h3 id="one-or-more-repeat-3-again" class="section-heading">
  <a href="#one-or-more-repeat-3-again" class="hover-link"><span class="icon-link" aria-hidden="true"></span></a>
  One Or More - <code class="inline">repeat/3</code> again
</h3>

<p>There is no specific combinator to match one or more repetitions of a given parser, but
you can pass a minimal number of repetitions to the <code class="inline">repeat</code> combinator.
If you pass a minimum of 1 repetition, you can emulate the “One Or More” operation.</p>
<pre><code class="nohighlight makeup"><span class="gp">iex&gt;</span><span class="w"> </span><span class="p" data-group-id="8">%{</span><span class="ss">error</span><span class="p">:</span><span class="w"> </span><span class="n">error</span><span class="p" data-group-id="8">}</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">parse</span><span class="p" data-group-id="27">(</span><span class="s2">&quot;&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">repeat</span><span class="p" data-group-id="26">(</span><span class="n">e</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="p" data-group-id="26">)</span><span class="p" data-group-id="27">)</span><span class="w">
</span><span class="p" data-group-id="112">%</span><span class="nc" data-group-id="112">ExSpirit.Parser.Context</span><span class="p" data-group-id="112">{</span><span class="ss">column</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
 </span><span class="ss">error</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="97">%</span><span class="nc" data-group-id="97">ExSpirit.Parser.ParseException</span><span class="p" data-group-id="97">{</span><span class="ss">context</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="85">%</span><span class="nc" data-group-id="85">ExSpirit.Parser.Context</span><span class="p" data-group-id="85">{</span><span class="ss">column</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
   </span><span class="ss">error</span><span class="p">:</span><span class="w"> </span><span class="no">nil</span><span class="p">,</span><span class="w"> </span><span class="ss">filename</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;&lt;unknown&gt;&quot;</span><span class="p">,</span><span class="w"> </span><span class="ss">line</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="ss">position</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="ss">rest</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;&quot;</span><span class="p">,</span><span class="w">
   </span><span class="ss">result</span><span class="p">:</span><span class="w"> </span><span class="no">nil</span><span class="p">,</span><span class="w"> </span><span class="ss">rulestack</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="68">[]</span><span class="p">,</span><span class="w"> </span><span class="ss">skipper</span><span class="p">:</span><span class="w"> </span><span class="no">nil</span><span class="p">,</span><span class="w"> </span><span class="ss">state</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="81">%{}</span><span class="p">,</span><span class="w"> </span><span class="ss">userdata</span><span class="p">:</span><span class="w"> </span><span class="no">nil</span><span class="p" data-group-id="85">}</span><span class="p">,</span><span class="w">
  </span><span class="ss">extradata</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
  </span><span class="ss">message</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Repeating over a parser failed due to not reaching the minimum amount of 1 with only a repeat count of 0&quot;</span><span class="p" data-group-id="97">}</span><span class="p">,</span><span class="w">
 </span><span class="ss">filename</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;&lt;unknown&gt;&quot;</span><span class="p">,</span><span class="w"> </span><span class="ss">line</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="ss">position</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="ss">rest</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;&quot;</span><span class="p">,</span><span class="w"> </span><span class="ss">result</span><span class="p">:</span><span class="w"> </span><span class="no">nil</span><span class="p">,</span><span class="w">
 </span><span class="ss">rulestack</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="103">[]</span><span class="p">,</span><span class="w"> </span><span class="ss">skipper</span><span class="p">:</span><span class="w"> </span><span class="no">nil</span><span class="p">,</span><span class="w"> </span><span class="ss">state</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="109">%{}</span><span class="p">,</span><span class="w"> </span><span class="ss">userdata</span><span class="p">:</span><span class="w"> </span><span class="no">nil</span><span class="p" data-group-id="112">}</span><span class="w">

</span><span class="gp">iex(23)&gt;</span><span class="w"> </span><span class="p" data-group-id="116">%{</span><span class="ss">error</span><span class="p">:</span><span class="w"> </span><span class="no">nil</span><span class="p" data-group-id="116">}</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">parse</span><span class="p" data-group-id="121">(</span><span class="s2">&quot;a&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">repeat</span><span class="p" data-group-id="120">(</span><span class="n">e</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="p" data-group-id="120">)</span><span class="p" data-group-id="121">)</span><span class="w">
</span><span class="p" data-group-id="132">%</span><span class="nc" data-group-id="132">ExSpirit.Parser.Context</span><span class="p" data-group-id="132">{</span><span class="ss">column</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w"> </span><span class="ss">error</span><span class="p">:</span><span class="w"> </span><span class="no">nil</span><span class="p">,</span><span class="w"> </span><span class="ss">filename</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;&lt;unknown&gt;&quot;</span><span class="p">,</span><span class="w"> </span><span class="ss">line</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
 </span><span class="ss">position</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="ss">rest</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;&quot;</span><span class="p">,</span><span class="w"> </span><span class="ss">result</span><span class="p">:</span><span class="w"> </span><span class="s1">'a'</span><span class="p">,</span><span class="w"> </span><span class="ss">rulestack</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="130">[]</span><span class="p">,</span><span class="w"> </span><span class="ss">skipper</span><span class="p">:</span><span class="w"> </span><span class="no">nil</span><span class="p">,</span><span class="w"> </span><span class="ss">state</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="131">%{}</span><span class="p">,</span><span class="w">
 </span><span class="ss">userdata</span><span class="p">:</span><span class="w"> </span><span class="no">nil</span><span class="p" data-group-id="132">}</span><span class="w">

</span><span class="gp">iex&gt;</span><span class="w"> </span><span class="p" data-group-id="135">%{</span><span class="ss">error</span><span class="p">:</span><span class="w"> </span><span class="no">nil</span><span class="p" data-group-id="135">}</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">parse</span><span class="p" data-group-id="140">(</span><span class="s2">&quot;aa&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">repeat</span><span class="p" data-group-id="139">(</span><span class="n">e</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="p" data-group-id="139">)</span><span class="p" data-group-id="140">)</span><span class="w">
</span><span class="p" data-group-id="149">%</span><span class="nc" data-group-id="149">ExSpirit.Parser.Context</span><span class="p" data-group-id="149">{</span><span class="ss">column</span><span class="p">:</span><span class="w"> </span><span class="mi">3</span><span class="p">,</span><span class="w"> </span><span class="ss">error</span><span class="p">:</span><span class="w"> </span><span class="no">nil</span><span class="p">,</span><span class="w"> </span><span class="ss">filename</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;&lt;unknown&gt;&quot;</span><span class="p">,</span><span class="w"> </span><span class="ss">line</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
 </span><span class="ss">position</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w"> </span><span class="ss">rest</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;&quot;</span><span class="p">,</span><span class="w"> </span><span class="ss">result</span><span class="p">:</span><span class="w"> </span><span class="s1">'aa'</span><span class="p">,</span><span class="w"> </span><span class="ss">rulestack</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="145">[]</span><span class="p">,</span><span class="w"> </span><span class="ss">skipper</span><span class="p">:</span><span class="w"> </span><span class="no">nil</span><span class="p">,</span><span class="w"> </span><span class="ss">state</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="147">%{}</span><span class="p">,</span><span class="w">
 </span><span class="ss">userdata</span><span class="p">:</span><span class="w"> </span><span class="no">nil</span><span class="p" data-group-id="149">}</span><span class="w">

</span><span class="gp">iex&gt;</span><span class="w"> </span><span class="p" data-group-id="150">%{</span><span class="ss">error</span><span class="p">:</span><span class="w"> </span><span class="no">nil</span><span class="p" data-group-id="150">}</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">parse</span><span class="p" data-group-id="153">(</span><span class="s2">&quot;aaaa&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">repeat</span><span class="p" data-group-id="152">(</span><span class="n">e</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="p" data-group-id="152">)</span><span class="p" data-group-id="153">)</span><span class="w">
</span><span class="p" data-group-id="159">%</span><span class="nc" data-group-id="159">ExSpirit.Parser.Context</span><span class="p" data-group-id="159">{</span><span class="ss">column</span><span class="p">:</span><span class="w"> </span><span class="mi">5</span><span class="p">,</span><span class="w"> </span><span class="ss">error</span><span class="p">:</span><span class="w"> </span><span class="no">nil</span><span class="p">,</span><span class="w"> </span><span class="ss">filename</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;&lt;unknown&gt;&quot;</span><span class="p">,</span><span class="w"> </span><span class="ss">line</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
 </span><span class="ss">position</span><span class="p">:</span><span class="w"> </span><span class="mi">4</span><span class="p">,</span><span class="w"> </span><span class="ss">rest</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;&quot;</span><span class="p">,</span><span class="w"> </span><span class="ss">result</span><span class="p">:</span><span class="w"> </span><span class="s1">'aaaa'</span><span class="p">,</span><span class="w"> </span><span class="ss">rulestack</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="157">[]</span><span class="p">,</span><span class="w"> </span><span class="ss">skipper</span><span class="p">:</span><span class="w"> </span><span class="no">nil</span><span class="p">,</span><span class="w"> </span><span class="ss">state</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="158">%{}</span><span class="p">,</span><span class="w">
 </span><span class="ss">userdata</span><span class="p">:</span><span class="w"> </span><span class="no">nil</span><span class="p" data-group-id="159">}</span></code></pre>
<h3 id="optional" class="section-heading">
  <a href="#optional" class="hover-link"><span class="icon-link" aria-hidden="true"></span></a>
  Optional
</h3>

<h3 id="and-predicate-lookahead" class="section-heading">
  <a href="#and-predicate-lookahead" class="hover-link"><span class="icon-link" aria-hidden="true"></span></a>
  And-Predicate - <code class="inline">lookahead</code>
</h3>

<pre><code class="nohighlight makeup"><span class="gp">iex&gt;</span><span class="w"> </span><span class="p" data-group-id="17">%{</span><span class="ss">error</span><span class="p">:</span><span class="w"> </span><span class="no">nil</span><span class="p">,</span><span class="w"> </span><span class="ss">result</span><span class="p">:</span><span class="w"> </span><span class="n">result</span><span class="p">,</span><span class="w"> </span><span class="ss">rest</span><span class="p">:</span><span class="w"> </span><span class="n">rest</span><span class="p" data-group-id="17">}</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">parse</span><span class="p" data-group-id="43">(</span><span class="s2">&quot;a&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">lookahead</span><span class="p" data-group-id="42">(</span><span class="n">e</span><span class="p" data-group-id="42">)</span><span class="p" data-group-id="43">)</span><span class="w">
</span><span class="p" data-group-id="82">%</span><span class="nc" data-group-id="82">ExSpirit.Parser.Context</span><span class="p" data-group-id="82">{</span><span class="ss">column</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="ss">error</span><span class="p">:</span><span class="w"> </span><span class="no">nil</span><span class="p">,</span><span class="w"> </span><span class="ss">filename</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;&lt;unknown&gt;&quot;</span><span class="p">,</span><span class="w"> </span><span class="ss">line</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
 </span><span class="ss">position</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="ss">rest</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;a&quot;</span><span class="p">,</span><span class="w"> </span><span class="ss">result</span><span class="p">:</span><span class="w"> </span><span class="no">nil</span><span class="p">,</span><span class="w"> </span><span class="ss">rulestack</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="64">[]</span><span class="p">,</span><span class="w"> </span><span class="ss">skipper</span><span class="p">:</span><span class="w"> </span><span class="no">nil</span><span class="p">,</span><span class="w"> </span><span class="ss">state</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="78">%{}</span><span class="p">,</span><span class="w">
 </span><span class="ss">userdata</span><span class="p">:</span><span class="w"> </span><span class="no">nil</span><span class="p" data-group-id="82">}</span><span class="w">

</span><span class="gp">iex&gt;</span><span class="w"> </span><span class="p" data-group-id="90">{</span><span class="n">result</span><span class="p">,</span><span class="w"> </span><span class="n">rest</span><span class="p" data-group-id="90">}</span><span class="w">
</span><span class="p" data-group-id="91">{</span><span class="no">nil</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;a&quot;</span><span class="p" data-group-id="91">}</span><span class="w">

</span><span class="gp">iex&gt;</span><span class="w"> </span><span class="n">parse</span><span class="p" data-group-id="100">(</span><span class="s2">&quot;x&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">lookahead</span><span class="p" data-group-id="99">(</span><span class="n">e</span><span class="p" data-group-id="99">)</span><span class="p" data-group-id="100">)</span><span class="w">
</span><span class="p" data-group-id="156">%</span><span class="nc" data-group-id="156">ExSpirit.Parser.Context</span><span class="p" data-group-id="156">{</span><span class="ss">column</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
 </span><span class="ss">error</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="151">%</span><span class="nc" data-group-id="151">ExSpirit.Parser.ParseException</span><span class="p" data-group-id="151">{</span><span class="ss">context</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="122">%</span><span class="nc" data-group-id="122">ExSpirit.Parser.Context</span><span class="p" data-group-id="122">{</span><span class="ss">column</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
   </span><span class="ss">error</span><span class="p">:</span><span class="w"> </span><span class="no">nil</span><span class="p">,</span><span class="w"> </span><span class="ss">filename</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;&lt;unknown&gt;&quot;</span><span class="p">,</span><span class="w"> </span><span class="ss">line</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="ss">position</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="ss">rest</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;x&quot;</span><span class="p">,</span><span class="w">
   </span><span class="ss">result</span><span class="p">:</span><span class="w"> </span><span class="no">nil</span><span class="p">,</span><span class="w"> </span><span class="ss">rulestack</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="118">[]</span><span class="p">,</span><span class="w"> </span><span class="ss">skipper</span><span class="p">:</span><span class="w"> </span><span class="no">nil</span><span class="p">,</span><span class="w"> </span><span class="ss">state</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="119">%{}</span><span class="p">,</span><span class="w"> </span><span class="ss">userdata</span><span class="p">:</span><span class="w"> </span><span class="no">nil</span><span class="p" data-group-id="122">}</span><span class="p">,</span><span class="w">
  </span><span class="ss">extradata</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="148">%</span><span class="nc" data-group-id="148">ExSpirit.Parser.Context</span><span class="p" data-group-id="148">{</span><span class="ss">column</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
   </span><span class="ss">error</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="143">%</span><span class="nc" data-group-id="143">ExSpirit.Parser.ParseException</span><span class="p" data-group-id="143">{</span><span class="ss">context</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="137">%</span><span class="nc" data-group-id="137">ExSpirit.Parser.Context</span><span class="p" data-group-id="137">{</span><span class="ss">column</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
     </span><span class="ss">error</span><span class="p">:</span><span class="w"> </span><span class="no">nil</span><span class="p">,</span><span class="w"> </span><span class="ss">filename</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;&lt;unknown&gt;&quot;</span><span class="p">,</span><span class="w"> </span><span class="ss">line</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="ss">position</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="ss">rest</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;x&quot;</span><span class="p">,</span><span class="w">
     </span><span class="ss">result</span><span class="p">:</span><span class="w"> </span><span class="no">nil</span><span class="p">,</span><span class="w"> </span><span class="ss">rulestack</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="133">[</span><span class="ss">:e</span><span class="p" data-group-id="133">]</span><span class="p">,</span><span class="w"> </span><span class="ss">skipper</span><span class="p">:</span><span class="w"> </span><span class="no">nil</span><span class="p">,</span><span class="w"> </span><span class="ss">state</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="136">%{}</span><span class="p">,</span><span class="w"> </span><span class="ss">userdata</span><span class="p">:</span><span class="w"> </span><span class="no">nil</span><span class="p" data-group-id="137">}</span><span class="p">,</span><span class="w">
    </span><span class="ss">extradata</span><span class="p">:</span><span class="w"> </span><span class="no">nil</span><span class="p">,</span><span class="w">
    </span><span class="ss">message</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Tried parsing out any of the the characters of `'a'` but failed due to the input character not matching&quot;</span><span class="p" data-group-id="143">}</span><span class="p">,</span><span class="w">
   </span><span class="ss">filename</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;&lt;unknown&gt;&quot;</span><span class="p">,</span><span class="w"> </span><span class="ss">line</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="ss">position</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="ss">rest</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;x&quot;</span><span class="p">,</span><span class="w"> </span><span class="ss">result</span><span class="p">:</span><span class="w"> </span><span class="no">nil</span><span class="p">,</span><span class="w">
   </span><span class="ss">rulestack</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="144">[]</span><span class="p">,</span><span class="w"> </span><span class="ss">skipper</span><span class="p">:</span><span class="w"> </span><span class="no">nil</span><span class="p">,</span><span class="w"> </span><span class="ss">state</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="146">%{}</span><span class="p">,</span><span class="w"> </span><span class="ss">userdata</span><span class="p">:</span><span class="w"> </span><span class="no">nil</span><span class="p" data-group-id="148">}</span><span class="p">,</span><span class="w">
  </span><span class="ss">message</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Lookahead failed&quot;</span><span class="p" data-group-id="151">}</span><span class="p">,</span><span class="w"> </span><span class="ss">filename</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;&lt;unknown&gt;&quot;</span><span class="p">,</span><span class="w"> </span><span class="ss">line</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="ss">position</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
 </span><span class="ss">rest</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;x&quot;</span><span class="p">,</span><span class="w"> </span><span class="ss">result</span><span class="p">:</span><span class="w"> </span><span class="no">nil</span><span class="p">,</span><span class="w"> </span><span class="ss">rulestack</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="154">[]</span><span class="p">,</span><span class="w"> </span><span class="ss">skipper</span><span class="p">:</span><span class="w"> </span><span class="no">nil</span><span class="p">,</span><span class="w"> </span><span class="ss">state</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="155">%{}</span><span class="p">,</span><span class="w"> </span><span class="ss">userdata</span><span class="p">:</span><span class="w"> </span><span class="no">nil</span><span class="p" data-group-id="156">}</span></code></pre>
<h3 id="not-predicate-lookahead_not" class="section-heading">
  <a href="#not-predicate-lookahead_not" class="hover-link"><span class="icon-link" aria-hidden="true"></span></a>
  Not-Predicate - <code class="inline">lookahead_not</code>
</h3>

<pre><code class="nohighlight makeup"><span class="gp">iex&gt;</span><span class="w"> </span><span class="n">parse</span><span class="p" data-group-id="16">(</span><span class="s2">&quot;x&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">lookahead_not</span><span class="p" data-group-id="15">(</span><span class="n">e</span><span class="p" data-group-id="15">)</span><span class="p" data-group-id="16">)</span><span class="w">
</span><span class="p" data-group-id="61">%</span><span class="nc" data-group-id="61">ExSpirit.Parser.Context</span><span class="p" data-group-id="61">{</span><span class="ss">column</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="ss">error</span><span class="p">:</span><span class="w"> </span><span class="no">nil</span><span class="p">,</span><span class="w"> </span><span class="ss">filename</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;&lt;unknown&gt;&quot;</span><span class="p">,</span><span class="w"> </span><span class="ss">line</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
 </span><span class="ss">position</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="ss">rest</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;x&quot;</span><span class="p">,</span><span class="w"> </span><span class="ss">result</span><span class="p">:</span><span class="w"> </span><span class="no">nil</span><span class="p">,</span><span class="w"> </span><span class="ss">rulestack</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="49">[]</span><span class="p">,</span><span class="w"> </span><span class="ss">skipper</span><span class="p">:</span><span class="w"> </span><span class="no">nil</span><span class="p">,</span><span class="w"> </span><span class="ss">state</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="56">%{}</span><span class="p">,</span><span class="w">
 </span><span class="ss">userdata</span><span class="p">:</span><span class="w"> </span><span class="no">nil</span><span class="p" data-group-id="61">}</span><span class="w">

</span><span class="gp">iex&gt;</span><span class="w"> </span><span class="n">parse</span><span class="p" data-group-id="77">(</span><span class="s2">&quot;a&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">lookahead_not</span><span class="p" data-group-id="76">(</span><span class="n">e</span><span class="p" data-group-id="76">)</span><span class="p" data-group-id="77">)</span><span class="w">
</span><span class="p" data-group-id="142">%</span><span class="nc" data-group-id="142">ExSpirit.Parser.Context</span><span class="p" data-group-id="142">{</span><span class="ss">column</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
 </span><span class="ss">error</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="128">%</span><span class="nc" data-group-id="128">ExSpirit.Parser.ParseException</span><span class="p" data-group-id="128">{</span><span class="ss">context</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="108">%</span><span class="nc" data-group-id="108">ExSpirit.Parser.Context</span><span class="p" data-group-id="108">{</span><span class="ss">column</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
   </span><span class="ss">error</span><span class="p">:</span><span class="w"> </span><span class="no">nil</span><span class="p">,</span><span class="w"> </span><span class="ss">filename</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;&lt;unknown&gt;&quot;</span><span class="p">,</span><span class="w"> </span><span class="ss">line</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="ss">position</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="ss">rest</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;a&quot;</span><span class="p">,</span><span class="w">
   </span><span class="ss">result</span><span class="p">:</span><span class="w"> </span><span class="no">nil</span><span class="p">,</span><span class="w"> </span><span class="ss">rulestack</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="102">[]</span><span class="p">,</span><span class="w"> </span><span class="ss">skipper</span><span class="p">:</span><span class="w"> </span><span class="no">nil</span><span class="p">,</span><span class="w"> </span><span class="ss">state</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="105">%{}</span><span class="p">,</span><span class="w"> </span><span class="ss">userdata</span><span class="p">:</span><span class="w"> </span><span class="no">nil</span><span class="p" data-group-id="108">}</span><span class="p">,</span><span class="w">
  </span><span class="ss">extradata</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="126">%</span><span class="nc" data-group-id="126">ExSpirit.Parser.Context</span><span class="p" data-group-id="126">{</span><span class="ss">column</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w"> </span><span class="ss">error</span><span class="p">:</span><span class="w"> </span><span class="no">nil</span><span class="p">,</span><span class="w">
   </span><span class="ss">filename</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;&lt;unknown&gt;&quot;</span><span class="p">,</span><span class="w"> </span><span class="ss">line</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="ss">position</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="ss">rest</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;&quot;</span><span class="p">,</span><span class="w"> </span><span class="ss">result</span><span class="p">:</span><span class="w"> </span><span class="mi">97</span><span class="p">,</span><span class="w">
   </span><span class="ss">rulestack</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="123">[]</span><span class="p">,</span><span class="w"> </span><span class="ss">skipper</span><span class="p">:</span><span class="w"> </span><span class="no">nil</span><span class="p">,</span><span class="w"> </span><span class="ss">state</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="125">%{}</span><span class="p">,</span><span class="w"> </span><span class="ss">userdata</span><span class="p">:</span><span class="w"> </span><span class="no">nil</span><span class="p" data-group-id="126">}</span><span class="p">,</span><span class="w">
  </span><span class="ss">message</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Lookahead_not failed&quot;</span><span class="p" data-group-id="128">}</span><span class="p">,</span><span class="w"> </span><span class="ss">filename</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;&lt;unknown&gt;&quot;</span><span class="p">,</span><span class="w"> </span><span class="ss">line</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="ss">position</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
 </span><span class="ss">rest</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;a&quot;</span><span class="p">,</span><span class="w"> </span><span class="ss">result</span><span class="p">:</span><span class="w"> </span><span class="no">nil</span><span class="p">,</span><span class="w"> </span><span class="ss">rulestack</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="138">[]</span><span class="p">,</span><span class="w"> </span><span class="ss">skipper</span><span class="p">:</span><span class="w"> </span><span class="no">nil</span><span class="p">,</span><span class="w"> </span><span class="ss">state</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="141">%{}</span><span class="p">,</span><span class="w"> </span><span class="ss">userdata</span><span class="p">:</span><span class="w"> </span><span class="no">nil</span><span class="p" data-group-id="142">}</span></code></pre>
<h2 id="examples" class="section-heading">
  <a href="#examples" class="hover-link"><span class="icon-link" aria-hidden="true"></span></a>
  Examples
</h2>

<h3 id="example-a-calculator" class="section-heading">
  <a href="#example-a-calculator" class="hover-link"><span class="icon-link" aria-hidden="true"></span></a>
  Example - A Calculator
</h3>

<h3 id="example-parsing-a-string" class="section-heading">
  <a href="#example-parsing-a-string" class="hover-link"><span class="icon-link" aria-hidden="true"></span></a>
  Example - Parsing a String
</h3>

<h3 id="example-a-parer-for-peg-grammars" class="section-heading">
  <a href="#example-a-parer-for-peg-grammars" class="hover-link"><span class="icon-link" aria-hidden="true"></span></a>
  Example - A Parer for PEG Grammars
</h3>


      <footer class="footer">
        <p>
          <span class="line">
            Built using
            <a href="https://github.com/elixir-lang/ex_doc" title="ExDoc" rel="help" target="_blank">ExDoc</a> (v0.18.1),
          </span>
          <span class="line">
            designed by
            <a href="https://twitter.com/dignifiedquire" target="_blank" title="@dignifiedquire">Friedel Ziegelmayer</a>.
            </span>
        </p>
        <button class="night-mode-toggle"><span class="sr-only">Switch theme</span></button>
      </footer>
    </div>
  </div>
</section>
</div>
  <script src="dist/app-778c9ef903.js"></script>
  
  <script src="dist/ex_doc_makeup-js.js"></script>
  
  
  </body>
</html>

